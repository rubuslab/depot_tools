{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c4541603_4d085198",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1297921
      },
      "writtenOn": "2022-05-06T11:47:19Z",
      "side": 1,
      "message": "More context:\nPhaseScriptExecution Action\\ \\\"Compile\\ and\\ copy\\ chrome\\ via\\ ninja\\\" /Users/djean/Library/Developer/Xcode/DerivedData/all-chbgulvyofuiwtgscxhlnhcrvvbe/Build/Intermediates.noindex/all.build/Debug-iphonesimulator/chrome.build/Script-DE8678C1DADE678990341442.sh (in target \u0027chrome\u0027 from project \u0027all\u0027)\n    cd /Users/djean/bling/src/out/build\n    /bin/sh -c /Users/djean/Library/Developer/Xcode/DerivedData/all-chbgulvyofuiwtgscxhlnhcrvvbe/Build/Intermediates.noindex/all.build/Debug-iphonesimulator/chrome.build/Script-DE8678C1DADE678990341442.sh\n\nninja: Entering directory `../Debug-iphonesimulator\u0027\n[1/1] Regenerating ninja files\nninja: fatal: pipe: Too many open files\nCommand PhaseScriptExecution failed with a nonzero exit code",
      "revId": "91c08685fb7b07e796557d15853a567c71a97470",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "723e956f_a64f43e7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001939
      },
      "writtenOn": "2022-05-08T23:19:42Z",
      "side": 1,
      "message": "https://g3doc.corp.google.com/devtools/goma/g3doc/how-to-use-goma/how-to-install-goma-mac.md#relax-maxproc-and-maxfiles-limitations ?",
      "parentUuid": "c4541603_4d085198",
      "revId": "91c08685fb7b07e796557d15853a567c71a97470",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d5707d15_858d8a3e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2022-05-09T22:39:59Z",
      "side": 1,
      "message": "Can we update ninja so that when it detects this error it prints an informative error message? Or updated autoninja for the same purpose?\nIt seems unavoidable that ninja/autoninja on OSX or going to keep hitting this issue, and each time it is going to be very difficult for the developer who hits this for the first time to understand the problem and the solution.\n\ncrrev.com/c/3632492 allows setting a global -j limit which gives OSX developers another way to control this but, again, this isn\u0027t discoverable, which makes raising the parallelism problematic.",
      "parentUuid": "723e956f_a64f43e7",
      "revId": "91c08685fb7b07e796557d15853a567c71a97470",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f1a3636_660002a6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001939
      },
      "writtenOn": "2022-05-10T02:14:27Z",
      "side": 1,
      "message": "the error may happen in ninja, goma (compiler_proxy), or command invoked by ninja, so I think it is better to check resource.RLIMIT_NOFILE or RLIMIT_NPROC in autoninja and show warnings if the value is too small?",
      "parentUuid": "d5707d15_858d8a3e",
      "revId": "91c08685fb7b07e796557d15853a567c71a97470",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "334b9a03_575916a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2022-05-10T02:36:11Z",
      "side": 1,
      "message": "Filed https://crbug.com/1324025.\nThere is also https://crrev.com/c/3634807",
      "parentUuid": "2f1a3636_660002a6",
      "revId": "91c08685fb7b07e796557d15853a567c71a97470",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "161bc300_f37f314c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1297921
      },
      "writtenOn": "2022-05-10T08:10:35Z",
      "side": 1,
      "message": "The CL still needs to be reverted though. I\u0027ve applied the suggested fix https://g3doc.corp.google.com/devtools/goma/g3doc/how-to-use-goma/how-to-install-goma-mac.md?cl\u003dhead#relax-maxproc-and-maxfiles-limitations, rebooted and it now fails midway through building with the same issue:\n\nninja: fatal: pipe: Too many open files\n\nI\u0027ve had this mac for nearly two years without hitting this issue until the original CL was landed. I\u0027m happy to send you any logs you need.\n",
      "revId": "91c08685fb7b07e796557d15853a567c71a97470",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05b20459_9b2132ef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2022-05-10T08:25:21Z",
      "side": 1,
      "message": "Does that happen even if you increased maxfiles more e.g. 400000 or 800000?\nAlso do you see the issue if you limit parallelism to 800 by specifying -j explicitly to autoninja?",
      "parentUuid": "161bc300_f37f314c",
      "revId": "91c08685fb7b07e796557d15853a567c71a97470",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}