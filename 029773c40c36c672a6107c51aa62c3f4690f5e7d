{
  "comments": [
    {
      "key": {
        "uuid": "5ddd9dca_4136c96a",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1031,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-19T00:30:40Z",
      "side": 1,
      "message": "Cool! The way I imagined this was that we\u0027d pass the hook name as \u0027extra\u0027 here, and not print the command. And if a command does produce output, we\u0027d print the command and its output then.\n\nAs-is, I think this overwrites the last line of a command\u0027s output, which probably is not good.",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fde6fb0e_9cc1a4bd",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1031,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-10-19T00:49:35Z",
      "side": 1,
      "message": "I\u0027d think we want to get to a point where we don\u0027t print the output on success unless someone specified -v, too, right? But not in this CL?",
      "parentUuid": "5ddd9dca_4136c96a",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "becfd733_3cce5f65",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1031,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-10-19T01:09:57Z",
      "side": 1,
      "message": "Done (with passing hook name as the extra arg).\n\nIn empirical testing, it doesn\u0027t seem to be eating the last line of output (the output from the one hook that currently always generates output is the same whether or not I run with -v). Here\u0027s the output without -v:\n$ gclient sync -j20 -D -f                                              \ndepot_tools update failed. Conflict in /usr/local/google/home/dcheng/src/depot_tools                   \nCannot rebase: You have unstaged changes.          \nPlease commit or stash them.                       \nSyncing projects: 100% (162/162), done.                                                                \n________ running \u0027/usr/bin/python src/tools/perf/conditionally_execute --gyp-condition fetch_telemetry_dependencies\u003d1 src/third_party/catapult/telemetry/bin/fetch_telemetry_binary_dependencies\u0027 in \u0027/usr/local/google/home/dcheng/src/chrome\u0027                  \nNot found \"fetch_telemetry_dependencies\u003d1\" condition in GYP_DEFINES\u003d\"[]\". Skip script execution.       \nRunning hooks: 100% (65/65), done.\n\nAnd with -v (trimmed to just the failing hook and some surrounding lines):\n________ running \u0027/usr/bin/python src/third_party/depot_tools/download_from_google_storage.py --no_resume --extract --no_auth --bucket chromium-nodejs/6.9.4 -s src/third_party/node/linux/node-linux-x64.tar.gz.sha1\u0027 in \u0027/usr/local/google/home/dcheng/src/chrome\u0027                                                 \n________ running \u0027/usr/bin/python src/third_party/depot_tools/download_from_google_storage.py --no_resume --extract --no_auth --bucket chromium-nodejs -s src/third_party/node/node_modules.tar.gz.sha1\u0027 in \u0027/usr/local/google/home/dcheng/src/chrome\u0027                                                               \n________ running \u0027/usr/bin/python src/tools/perf/conditionally_execute --gyp-condition fetch_telemetry_dependencies\u003d1 src/third_party/catapult/telemetry/bin/fetch_telemetry_binary_dependencies\u0027 in \u0027/usr/local/google/home/dcheng/src/chrome\u0027                                                                      \nNot found \"fetch_telemetry_dependencies\u003d1\" condition in GYP_DEFINES\u003d\"[]\". Skip script execution.       ________ running \u0027/usr/bin/python src/third_party/depot_tools/download_from_google_storage.py --no_resu\nme --no_auth --num_threads\u003d4 --bucket chromium-tools-traffic_annotation -d src/tools/traffic_annotation/bin/linux64\u0027 in \u0027/usr/local/google/home/dcheng/src/chrome\u0027                                            \n________ running \u0027/usr/bin/python src/third_party/depot_tools/download_from_google_storage.py --no_resume --no_auth --num_threads\u003d4 --bucket chromium-binary-patching -d src/chrome/installer/zucchini/testdat\na\u0027 in \u0027/usr/local/google/home/dcheng/src/chrome\u0027",
      "parentUuid": "fde6fb0e_9cc1a4bd",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89a5cb9b_08037303",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1031,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-19T02:37:01Z",
      "side": 1,
      "message": "I think we always want to see the output if there\u0027s output. If a hook says \"downloaded new compiler\" (for example), that\u0027s useful information. So this shouldn\u0027t hide output of successful commands. We should just require that commands are silent in the did-nothing case. (I believe that\u0027s what this CL currently does?)",
      "parentUuid": "becfd733_3cce5f65",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "30db9596_cc09aad3",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1031,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-10-19T16:02:47Z",
      "side": 1,
      "message": "I guess I\u0027m more minimalist in this case than you :).",
      "parentUuid": "89a5cb9b_08037303",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "47120e81_87697551",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1031,
      "author": {
        "id": 1001629
      },
      "writtenOn": "2017-10-19T17:33:18Z",
      "side": 1,
      "message": "It\u0027s possible you\u0027re in the right here.\n\nOne thing I do want to say is that I think that output locally for devs and on the bots should be identical (except for the overprinting; it\u0027d be a new line on the bots of course). The bots should run in some \"verbose\" mode while devs don\u0027t. If you still think that not printing anything for successful commands is the right thing, I\u0027d be happy if we tried that. (For the \"compiler update\" example, I think it\u0027s useful to see the \"update\" message, but we also log the clang revision as build metadata, so it\u0027s not really getting lost if it\u0027s not printed.) If it turns out that the output is too terse then, we can always paddle back.",
      "parentUuid": "30db9596_cc09aad3",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5aa44c1_53828c14",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1506,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-10-19T00:49:35Z",
      "side": 1,
      "message": "I think you need to modify this so that you create a pm if the command \u003d\u003d \u0027runhooks\u0027, because otherise it\u0027s null and this makes `gclient runhooks` be too silent.",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98a2aea2_55f43c9a",
        "filename": "gclient.py",
        "patchSetId": 2
      },
      "lineNbr": 1506,
      "author": {
        "id": 1001168
      },
      "writtenOn": "2017-10-19T01:09:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d5aa44c1_53828c14",
      "revId": "029773c40c36c672a6107c51aa62c3f4690f5e7d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}