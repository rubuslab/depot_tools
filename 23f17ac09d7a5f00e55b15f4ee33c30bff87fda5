{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c4155326_28a3a963",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2022-05-26T20:48:41Z",
      "side": 1,
      "message": "iirc, we discussed that we wanted to auto update https -\u003e sso when we\u0027ve detected that we\u0027re in a cog workspace rather than requiring users to add `-p\u003dsso`.\n\nIs that still the plan? ",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3de4be9a_f36a65cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2022-05-26T21:03:57Z",
      "side": 1,
      "message": "+1 for this - we should default to -p\u003dsso in this environment when running fetch. A warning would be useful so folks know.",
      "parentUuid": "c4155326_28a3a963",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "316bb42f_3ead5761",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2022-05-27T16:31:44Z",
      "side": 1,
      "message": "I didn\u0027t realize that was going to be a part of this.\n\nIs the defaulting part only for fetch. As in, if someone writes their own .gclient file and run gclient sync, would we still default to sso?",
      "parentUuid": "3de4be9a_f36a65cf",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90d74dac_09c03ff2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2022-05-27T17:05:30Z",
      "side": 1,
      "message": "sorry, it could be in a separate CL if it makes sense. i was just wondering about the overall plan. if we know we need to check \"isCog?\" in more than one place, if possible both places should be calling the same code? I wasn\u0027t sure if the plan was to call this from everywhere and if it\u0027s confirmed that scm.is_env_cog is reasonably accessible from everywhere that needs this info etc. \n\n\u003eAs in, if someone writes their own .gclient file and run gclient sync, would we still default to sso?\ni\u0027d vote for defaulting to sso with a warning.",
      "parentUuid": "316bb42f_3ead5761",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd3a9b70_a2579602",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2022-05-27T17:14:25Z",
      "side": 1,
      "message": "\u003e\u003eAs in, if someone writes their own .gclient file and run gclient sync, would we still default to sso?\n\u003ei\u0027d vote for defaulting to sso with a warning.\nI take this back. i think the onus should be on the user to write it correctly if they\u0027re gonna write one from scratch?",
      "parentUuid": "90d74dac_09c03ff2",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e2994050_ed1b3e66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2022-06-01T23:46:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fd3a9b70_a2579602",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b82b8250_5f89b085",
        "filename": "gclient_scm.py",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2022-05-26T21:03:57Z",
      "side": 1,
      "message": "nit: Might be useful to be its own function?",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f519435_593f48ff",
        "filename": "gclient_scm.py",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2022-05-27T16:31:44Z",
      "side": 1,
      "message": "The previous patchset had this as its own function but given we are supporting py2, I couldn\u0027t use decorators like @cached_property. There is no point in checking this everytime and that\u0027s why I put this as a bool class variable.",
      "parentUuid": "b82b8250_5f89b085",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e6391ac_302a7f39",
        "filename": "gclient_scm.py",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2022-05-27T23:50:51Z",
      "side": 1,
      "message": "Problem is that os.getcwd.startswith() is executed when this file is loaded, and not when variable is accessed.\n\nPerhaps:\n\n  _is_env_cog \u003d None\n  \n  def IsCog(self):\n    if self._is_env_cog is None:\n      self._is_env_cog \u003d os.getcwd().startswith(\u0027/google/src/cloud\u0027)\n    return self._is_env_cog",
      "parentUuid": "4f519435_593f48ff",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99151cfe_b47e84c6",
        "filename": "gclient_scm.py",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2022-06-01T17:43:30Z",
      "side": 1,
      "message": "I\u0027m sorry, I don\u0027t understand what the issue is with writing `_is_env_cog` when the file is loaded. The path is still going to be the same right?",
      "parentUuid": "6e6391ac_302a7f39",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa7b3c2d_f36f1200",
        "filename": "gclient_scm.py",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2022-06-01T17:57:46Z",
      "side": 1,
      "message": "Loading the file will result in making extra syscalls that may be unnecessary. It could make testing harder too. As I wrote, this is a nit comment.",
      "parentUuid": "99151cfe_b47e84c6",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d0ac417f_530cc83a",
        "filename": "gclient_scm.py",
        "patchSetId": 5
      },
      "lineNbr": 212,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2022-06-01T23:46:27Z",
      "side": 1,
      "message": "That makes sense, I will update it.",
      "parentUuid": "aa7b3c2d_f36f1200",
      "revId": "23f17ac09d7a5f00e55b15f4ee33c30bff87fda5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}